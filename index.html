<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
<h1>Hello World</h1>
<p>I'm hosted with GitHub Pages.</p>
<p>
<b>You are browsing this site with:</b>
<span id="userAgent"></span>
</p>
<p>
<b>Your host name:</b>
<span id="hostname"></span>
</p>
<p>
<b>The protocol used:</b>
<span id="protocol"></span>
</p>
<p>
<b>The server's domain name:</b>
<span id="domain"></span>
</p>
<p>
<b>The server's port:</b>
<span id="port"></span>
</p>
<p>
<b>Your IP address is:</b>
<span id="ipAddress">Loading...</span>
</p>
<p>
<b>Your Local IP address is:</b>
<span id="localIpAddress">Detecting...</span>
</p>

<script>
    document.getElementById('userAgent').textContent = navigator.userAgent;
    document.getElementById('hostname').textContent = window.location.hostname;
    document.getElementById('protocol').textContent = window.location.protocol;
    document.getElementById('domain').textContent = window.location.host;
    document.getElementById('port').textContent = window.location.port || '80/443';

    fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
            document.getElementById('ipAddress').textContent = data.ip;
        })
        .catch(error => {
            document.getElementById('ipAddress').textContent = 'Unable to fetch IP';
        });

    async function getLocalIPs() {
        try {
            const peerConnection = new RTCPeerConnection({
                iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
            });
            
            peerConnection.createDataChannel('');
            await peerConnection.createOffer().then(o => peerConnection.setLocalDescription(o));

            peerConnection.onicecandidate = function(e) {
                if (!e.candidate) return;
                
                const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
                const match = ipRegex.exec(e.candidate.candidate);
                if (match) {
                    document.getElementById('localIpAddress').textContent = match[1];
                    peerConnection.close();
                }
            };
        } catch (err) {
            document.getElementById('localIpAddress').textContent = 'Unable to detect local IP';
        }
    }

    getLocalIPs();
</script>
</body>
</html>